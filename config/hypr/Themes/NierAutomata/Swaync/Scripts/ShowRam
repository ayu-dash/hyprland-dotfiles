#!/usr/bin/env python3

import subprocess

def get_ram_info():
    with open('/proc/meminfo', 'r') as f:
        lines = f.readlines()
    
    mem_total = int(lines[0].split()[1]) / 1024  # MB
    mem_available = int(lines[2].split()[1]) / 1024  # MB
    mem_used = mem_total - mem_available
    percent = int((mem_used / mem_total) * 100)
    
    # Human readable
    if mem_total >= 1024:
        total_h = f"{mem_total/1024:.1f}G"
        used_h = f"{mem_used/1024:.1f}G"
    else:
        total_h = f"{mem_total:.0f}M"
        used_h = f"{mem_used:.0f}M"
    
    return used_h, total_h, percent

def notify(used, total, percent):
    subprocess.run([
        'notify-send',
        '-h', f'int:value:{percent}',
        '-h', 'string:x-canonical-private-synchronous:sys_notif',
        '-c', 'custom',  # No history
        '-t', '10',  # 3 seconds
        'Û∞çõ RAM Usage',
        f'{used} / {total} ({percent}%)'
    ])

if __name__ == '__main__':
    used, total, percent = get_ram_info()
    notify(used, total, percent)
    